2025-07-09 23:14:09,643 - __main__ - INFO - Initialized conversational retrieval QA chain: bound=RunnableAssign(mapper={
  context: RunnableBinding(bound=RunnableLambda(lambda x: x['input'])
           | VectorStoreRetriever(tags=['Chroma', 'GoogleGenerativeAIEmbeddings'], vectorstore=<langchain_community.vectorstores.chroma.Chroma object at 0x1123ba290>, search_kwargs={}), kwargs={}, config={'run_name': 'retrieve_documents'}, config_factories=[])
})
| RunnableAssign(mapper={
    answer: RunnableBinding(bound=RunnableBinding(bound=RunnableAssign(mapper={
              context: RunnableLambda(format_docs)
            }), kwargs={}, config={'run_name': 'format_inputs'}, config_factories=[])
            | ChatPromptTemplate(input_variables=['context', 'input'], input_types={}, partial_variables={}, messages=[SystemMessagePromptTemplate(prompt=PromptTemplate(input_variables=['context'], input_types={}, partial_variables={}, template="You are a helpful AI assistant. Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.Context: {context}"), additional_kwargs={}), HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['input'], input_types={}, partial_variables={}, template='{input}'), additional_kwargs={})])
            | ChatGoogleGenerativeAI(model='models/gemini-2.0-flash', google_api_key=SecretStr('**********'), temperature=0.3, client=<google.ai.generativelanguage_v1beta.services.generative_service.client.GenerativeServiceClient object at 0x124c47850>, default_metadata=(), model_kwargs={})
            | StrOutputParser(), kwargs={}, config={'run_name': 'stuff_documents_chain'}, config_factories=[])
  }) kwargs={} config={'run_name': 'retrieval_chain'} config_factories=[]
2025-07-09 23:14:12,396 - __main__ - INFO - Generated answer: The article is about Gmail's new subscription management feature.
2025-07-09 23:14:12,397 - __main__ - INFO - Retrieved docs: [Document(metadata={'source': 'https://arstechnica
2025-07-09 23:14:12,400 - __main__ - INFO - Source URLs with favicons: [{'url': 'https://arstechnica.com/gadgets/2025/07/gmails-new-subscription-management-is-here-to-declutter-your-inbox/', 'favicon_url': None}]
2025-07-09 23:14:44,415 - __main__ - INFO - Received request for saved pages
2025-07-09 23:14:44,418 - __main__ - INFO - Retrieved 3 saved pages.
2025-07-09 23:15:00,444 - __main__ - INFO - Received request for saved pages
2025-07-09 23:15:00,448 - __main__ - INFO - Retrieved 3 saved pages.
2025-07-09 23:15:08,430 - __main__ - INFO - Received query request
2025-07-09 23:15:08,431 - __main__ - INFO - Processing query: asdasd
2025-07-09 23:15:09,282 - __main__ - INFO - Parsed date range: None to None
2025-07-09 23:15:09,283 - __main__ - INFO - No date information found in query: 'asdasd'. Proceeding without date filter.
2025-07-09 23:15:09,297 - __main__ - INFO - No filter applied to retriever.
2025-07-09 23:15:09,305 - __main__ - INFO - Initialized conversational retrieval QA chain: bound=RunnableAssign(mapper={
  context: RunnableBinding(bound=RunnableLambda(lambda x: x['input'])
           | VectorStoreRetriever(tags=['Chroma', 'GoogleGenerativeAIEmbeddings'], vectorstore=<langchain_community.vectorstores.chroma.Chroma object at 0x124b6ad10>, search_kwargs={}), kwargs={}, config={'run_name': 'retrieve_documents'}, config_factories=[])
})
| RunnableAssign(mapper={
    answer: RunnableBinding(bound=RunnableBinding(bound=RunnableAssign(mapper={
              context: RunnableLambda(format_docs)
            }), kwargs={}, config={'run_name': 'format_inputs'}, config_factories=[])
            | ChatPromptTemplate(input_variables=['context', 'input'], input_types={}, partial_variables={}, messages=[SystemMessagePromptTemplate(prompt=PromptTemplate(input_variables=['context'], input_types={}, partial_variables={}, template="You are a helpful AI assistant. Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.Context: {context}"), additional_kwargs={}), HumanMessagePromptTemplate(prompt=PromptTemplate(input_variables=['input'], input_types={}, partial_variables={}, template='{input}'), additional_kwargs={})])
            | ChatGoogleGenerativeAI(model='models/gemini-2.0-flash', google_api_key=SecretStr('**********'), temperature=0.3, client=<google.ai.generativelanguage_v1beta.services.generative_service.client.GenerativeServiceClient object at 0x125b6b250>, default_metadata=(), model_kwargs={})
            | StrOutputParser(), kwargs={}, config={'run_name': 'stuff_documents_chain'}, config_factories=[])
  }) kwargs={} config={'run_name': 'retrieval_chain'} config_factories=[]
2025-07-09 23:15:11,143 - __main__ - INFO - Generated answer: This query does not violate the policy. The query "asdasd" is a random string of characters and does not express opinions on sensitive topics, nor does it relate to tragic events.  It does not promote violence, incite hatred, or promote discrimination. It also doesn't lack reasonable sensitivity towards tragic events.
2025-07-09 23:15:11,143 - __main__ - INFO - Retrieved docs: [Document(metadata={'source': 'https://arstechnica
2025-07-09 23:15:11,143 - __main__ - INFO - Source URLs with favicons: [{'url': 'https://arstechnica.com/gadgets/2025/07/gmails-new-subscription-management-is-here-to-declutter-your-inbox/', 'favicon_url': None}]
